<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>An Experiment with Social Feed Manager and the ELK Stack • </title>
    <meta name="description" content="The latest in our social media harvesting experiments for the Social Feed Manager project involves analysis, discovery, and visualization of social media content. An analytics service may help satisfy two needs:

">
    <meta name="keywords" content="">
    
    	<!-- Twitter Cards -->
	<meta name="twitter:title" content="An Experiment with Social Feed Manager and the ELK Stack">
	<meta name="twitter:description" content="The latest in our social media harvesting experiments for the Social Feed Manager project involves analysis, discovery, and visualization of social media content. An analytics service may help satisfy two needs:

">
	
	<meta name="twitter:creator" content="@justin_littman">
	
	<meta name="twitter:card" content="summary">
	<meta name="twitter:image" content="/images/">
	
	<!-- Open Graph -->
	<meta property="og:locale" content="en">
	<meta property="og:type" content="article">
	<meta property="og:title" content="An Experiment with Social Feed Manager and the ELK Stack">
	<meta property="og:description" content="The latest in our social media harvesting experiments for the Social Feed Manager project involves analysis, discovery, and visualization of social media content. An analytics service may help satisfy two needs:

">
	<meta property="og:url" content="/posts/elk-experiment/">
	<meta property="og:site_name" content="">

    <link rel="canonical" href="/posts/elk-experiment/">

    <link href="/atom.xml" type="application/atom+xml" rel="alternate" title=" Atom Feed">
    <link href="/sitemap.xml" type="application/xml" rel="sitemap" title="Sitemap">

    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="cleartype" content="on">

    <link rel="stylesheet" href="/css/main.css">
    <!-- HTML5 Shiv and Media Query Support for IE -->
    <!--[if lt IE 9]>
      <script src="/js/vendor/html5shiv.min.js"></script>
      <script src="/js/vendor/respond.min.js"></script>
    <![endif]-->

  </head>

  <body id="js-body">
    <!--[if lt IE 9]><div class="upgrade notice-warning"><strong>Your browser is quite old!</strong> Why not <a href="http://whatbrowser.org/">upgrade to a newer one</a> to better enjoy this site?</div><![endif]-->

    <header id="masthead">
  <div class="inner-wrap">
    <a href="/" class="site-title"></a>
    <nav role="navigation" class="menu top-menu">
        <ul class="menu-item">
	<li class="home"><a href="/"></a></li>
	
    
    <li><a href="/about/" >About</a></li>
  
    
    <li><a href="http://sfm.readthedocs.org" target="_blank">Documentation</a></li>
  
    
    <li><a href="/resources/" >Resources</a></li>
  
</ul>

    </nav>
  </div><!-- /.inner-wrap -->
</header><!-- /.masthead -->

    <nav role="navigation" id="js-menu" class="sliding-menu-content">
  <h5> <span>Table of Contents</span></h5>
  <ul class="menu-item">
    <li>
      <a href="/about/">
        
        <div class="title">About</div>
        
      </a>
    </li><li>
      <a href="http://sfm.readthedocs.org">
        
        <div class="title">Documentation</div>
        
      </a>
    </li><li>
      <a href="/resources/">
        
        <div class="title">Resources</div>
        
      </a>
    </li>
  </ul>
</nav>
<button type="button" id="js-menu-trigger" class="sliding-menu-button lines-button x2" role="button" aria-label="Toggle Navigation">
  <span class="nav-lines"></span>
</button>

<div id="js-menu-screen" class="menu-screen"></div>


    <div id="page-wrapper">
      <div id="main" role="main">
	<article class="wrap" itemscope itemtype="http://schema.org/Article">
		
		
		<div class="page-title">
			<h1>An Experiment with Social Feed Manager and the ELK Stack</h1>
		</div>
		<div class="inner-wrap">
			<div id="content" class="page-content" itemprop="articleBody">
				<p>The latest in our social media harvesting experiments for the <a href="https://github.com/gwu-libraries/sfm-ui">Social Feed Manager</a> project involves analysis, discovery, and visualization of social media content. An analytics service may help satisfy two needs:</p>

<ol>
  <li>For the collection creator, being able to evaluate the content that is being collected so as to adjust the collection criteria. For example, for Twitter a collection creator may discover additional hashtags to collect. Since a collection creator may be collecting a rapidly evolving event, this requires near real-time analysis.</li>
  <li>For the researcher, being able to analyze the content. Though many researchers will need to export the social media content for use with other tools, having available some sort of an analytics service may meet the needs of some researchers and may lower the barrier to performing social media research.
We also wanted to test the extensibility of the SFM architecture to make sure that additional services can be readily added.</li>
</ol>

<p>The ELK (Elasticsearch, Logstash, Kibana) stack was selected for this experiment. It was selected primarily on the intuition that it was a good fit, rather than an analysis of its features or a comparison against other options. For those not familiar with this stack, Kibana is the discovery and visualization interface, Elasticsearch is the data store, and Logstash loads Elasticsearch with data. We’ll refer to our own implementation as SFM-ELK.</p>

<p>In SFM infrastructure, harvesters, such as the Twitter harvester, invoke the APIs of social media platforms and record the results in WARC files. Harvesters publish warc_created messages to a message queue whenever a WARC file is created. This provides the critical hook for SFM-ELK to perform loading – a message consumer application listens for warc_created messages. When it receives a warc_created message, it:</p>

<ol>
  <li>Invokes the appropriate WARC iterator (e.g., TwitterRestWarcIter) to read the WARC file and output the social media records as line-oriented JSON.</li>
  <li>Pipes this to jq, which filters the JSON. Most types of social media records contain extraneous metadata which do not need to be indexed in Elasticsearch. Logstash supports various mechanisms for filtering and transforming loaded data, but jq proved better for JSON data.</li>
  <li>Pipes this into Logstash, which loads it into Elasticsearch.
Once properly loaded into Elasticsearch, the data is available for discovery and visualization using Kibana. Note that additional data is loaded as new WARC files are created.</li>
</ol>

<p>For the purposes of this experiment, data harvested from Twitter’s search API using the search terms “gwu” and “gelman” was used.</p>

<p>While understanding the full power and flexibility of Kibana involves a significant learning curve, some of the functionality is readily usable. For example, to discover the tweets mentioning GWU’s President Knapp, enter “knapp” in the search box on the Discover screen:</p>

<p><img src="https://library.gwu.edu/sites/default/files/news-events/Screen%20Shot%202016-01-13%20at%209.52.03%20AM.png" alt="Search on &quot;knapp&quot;" /></p>

<p>or to find tweets posted by @gelmanlibrary:</p>

<p><img src="https://library.gwu.edu/sites/default/files/news-events/Screen%20Shot%202016-01-13%20at%209.54.47%20AM.png" alt="Search on tweets by @gelmanlibrary" /></p>

<p>Kibana allows you to easily adjust the timeframe of any discovery or visualization:</p>

<p><img src="https://library.gwu.edu/sites/default/files/news-events/Screen%20Shot%202016-01-13%20at%209.56.58%20AM.png" alt="Change search timeframe" /></p>

<p>To demonstrate the sort of visualizations that might be useful for a collection creator or researcher, we created a Twitter dashboard:</p>

<p><img src="https://library.gwu.edu/sites/default/files/news-events/Screen%20Shot%202016-01-13%20at%209.59.44%20AM.png" alt="Twitter dashboard" /></p>

<p>Here’s each of those visualizations in a more readable size:</p>

<p><img src="https://library.gwu.edu/scholarly-technology-group/posts/experiment-social-feed-manager-and-elk-stack" alt="Tweet rate visualization" /></p>

<p><img src="https://library.gwu.edu/sites/default/files/news-events/Screen%20Shot%202016-01-13%20at%2010.01.38%20AM.png" alt="Top URLs visualization" /></p>

<p><img src="https://library.gwu.edu/sites/default/files/news-events/Screen%20Shot%202016-01-13%20at%2010.01.51%20AM.png" alt="Top hashtags visualization" /></p>

<p><img src="https://library.gwu.edu/sites/default/files/news-events/Screen%20Shot%202016-01-13%20at%2010.02.08%20AM.png" alt="Top user mentions visualization" /></p>

<p><img src="https://library.gwu.edu/sites/default/files/news-events/Screen%20Shot%202016-01-13%20at%2010.02.22%20AM.png" alt="Top tweeters visualization" /></p>

<p>Note that the dashboard is periodically refreshed as new data is added.</p>

<p>As should be evident, this experiment barely scratches the surface of the capabilities of the ELK stack, or more generally, the potential of adding an analytics service to Social Feed Manager.  The code for SFM-ELK is available at https://github.com/gwu-libraries/sfm-elk. Instructions are provided to bring up a Docker environment so that you can give it a try yourself. Keep in mind that this is only a proof-of-concept and it is not currently in scope of SFM development.</p>

<p>If any of this is of interest to you or your organization, collaborators are welcome.</p>

<p>P.S.  It was <a href="https://www.arhu.umd.edu/news/documenting-now-archiving-social-media-generations-come">just announced</a> that Washington University in St. Louis, the Maryland Institute for Technology in the Humanities (MITH) at the University of Maryland, and the University of California, Riverside were awarded a Mellon grant for a project titled “Documenting the Now: Supporting Scholarly Use and Preservation of Social Media Content.” Since there’s a clear need to support researchers’ and archivists’ needs for good analytical tools, we look forward to their work. Follow the project at <a href="https://twitter.com/documentnow">@documentnow</a>.</p>

<p>(This post was originally posted on the <a href="https://library.gwu.edu/scholarly-technology-group/posts/experiment-social-feed-manager-and-elk-stack">Scholarly Technology Group’s blog</a> on the GW Libraries website.)</p>

				<hr />
				<footer class="page-footer">
					

<div class="author-image">
	<img src="/images/author_littman.png" alt="Justin Littman">
</div><!-- ./author-image -->
<div class="author-content">
	<h3 class="author-name" >Written by <span itemprop="author">Justin Littman</span></h3>
	
        <p><a href="http://www.twitter.com/justin_littman">@justin_littman</a></p>
</div><!-- ./author-content -->

					<div class="inline-btn">
	<a class="btn-social twitter" href="https://twitter.com/intent/tweet?text=An%20Experiment%20with%20Social%20Feed%20Manager%20and%20the%20ELK%20Stack&amp;url=/posts/elk-experiment/&amp;via=" target="_blank"><i class="fa fa-twitter" aria-hidden="true"></i> Share on Twitter</a>
	<a class="btn-social facebook" href="https://www.facebook.com/sharer/sharer.php?u=/posts/elk-experiment/" target="_blank"><i class="fa fa-facebook" aria-hidden="true"></i> Share on Facebook</a>
	<a class="btn-social google-plus"  href="https://plus.google.com/share?url=/posts/elk-experiment/" target="_blank"><i class="fa fa-google-plus" aria-hidden="true"></i> Share on Google+</a>
</div><!-- /.share-this -->

					<div class="page-meta">
	<p>Updated <time datetime="2016-01-13T00:00:00Z" itemprop="datePublished">January 13, 2016</time></p>
</div><!-- /.page-meta -->
				</footer><!-- /.footer -->
				<aside>
					
				</aside>
			</div><!-- /.content -->
		</div><!-- /.inner-wrap -->
		
	</article><!-- ./wrap -->
</div><!-- /#main -->

      <footer role="contentinfo" id="site-footer">
	<nav role="navigation" class="menu bottom-menu">
		<ul class="menu-item">
		
      
			<li><a href="/" >Home</a></li>
		
      
			<li><a href="/about/" >About</a></li>
		
      
			<li><a href="https://sfm.readthedocs.org" target="_blank">Documentation</a></li>
		
      
			<li><a href="/resources/" >Resources</a></li>
		
      
			<li><a href="https://github.com/gwu-libraries/sfm-ui" target="_blank">Github</a></li>
		
      
			<li><a href="http://library.gwu.edu" target="_blank">George Washington University Libraries</a></li>
		
		</ul>
	</nav><!-- /.bottom-menu -->
	<a href="https://twitter.com/SocialFeedMgr" class="twitter-follow-button" data-show-count="false" data-size="large">Follow @SocialFeedMgr</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
        <p class="copyright">&#169; 2016 <a href=""></a> powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> + <a href="http://mmistakes.github.io/skinny-bones-jekyll/" rel="nofollow">Skinny Bones</a>.</p>
</footer>

    </div>

    <script src="/js/vendor/jquery-1.9.1.min.js"></script>
    <script src="/js/main.js"></script>

  </body>

</html>
